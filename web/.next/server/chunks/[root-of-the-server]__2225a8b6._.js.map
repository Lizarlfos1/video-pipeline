{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 67, "column": 0}, "map": {"version":3,"sources":["file:///Users/jimmygrills/Documents/Coding/video-pipeline/web/lib/paths.ts"],"sourcesContent":["import path from \"node:path\";\n\n/** Project root is one level up from /web */\nexport const PROJECT_ROOT = path.resolve(process.cwd(), \"..\");\nexport const RUNS_DIR = path.join(PROJECT_ROOT, \"runs\");\nexport const ASSETS_DIR = path.join(PROJECT_ROOT, \"assets\");\n\n/** Validate a path is within the project root (prevent directory traversal) */\nexport function validatePath(relativePath: string): string | null {\n  const absolute = path.resolve(PROJECT_ROOT, relativePath);\n  if (!absolute.startsWith(PROJECT_ROOT)) return null;\n  return absolute;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAGO,MAAM,eAAe,4HAAI,CAAC,OAAO,CAAC,QAAQ,GAAG,IAAI;AACjD,MAAM,WAAW,4HAAI,CAAC,IAAI,CAAC,cAAc;AACzC,MAAM,aAAa,4HAAI,CAAC,IAAI,CAAC,cAAc;AAG3C,SAAS,aAAa,YAAoB;IAC/C,MAAM,WAAW,4HAAI,CAAC,OAAO,CAAC,cAAc;IAC5C,IAAI,CAAC,SAAS,UAAU,CAAC,eAAe,OAAO;IAC/C,OAAO;AACT","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/jimmygrills/Documents/Coding/video-pipeline/web/app/api/runs/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { readdir, stat, access } from \"node:fs/promises\";\nimport path from \"node:path\";\nimport { RUNS_DIR } from \"@/lib/paths\";\n\nexport async function GET() {\n  try {\n    const entries = await readdir(RUNS_DIR, { withFileTypes: true });\n    const runs = await Promise.all(\n      entries\n        .filter((e) => e.isDirectory())\n        .sort((a, b) => b.name.localeCompare(a.name)) // newest first\n        .map(async (entry) => {\n          const dir = path.join(RUNS_DIR, entry.name);\n          const exists = async (file: string) => {\n            try {\n              await access(path.join(dir, file));\n              return true;\n            } catch {\n              return false;\n            }\n          };\n\n          const countFiles = async (subdir: string) => {\n            try {\n              const files = await readdir(path.join(dir, subdir));\n              return files.filter((f) => f.endsWith(\".mp4\")).length;\n            } catch {\n              return 0;\n            }\n          };\n\n          return {\n            id: entry.name,\n            created: entry.name,\n            hasARoll: await exists(\"a-roll.mp4\"),\n            hasTranscript: await exists(\"transcript.json\"),\n            hasEdits: await exists(\"edits.json\"),\n            hasAssets: await exists(\"assets.json\"),\n            hasScript: await exists(\"script.txt\"),\n            shortsCount: await countFiles(\"shorts\"),\n            finalsCount: await countFiles(\"finals\"),\n          };\n        })\n    );\n\n    return NextResponse.json(runs);\n  } catch (e) {\n    return NextResponse.json([], { status: 200 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,UAAU,MAAM,IAAA,gJAAO,EAAC,iIAAQ,EAAE;YAAE,eAAe;QAAK;QAC9D,MAAM,OAAO,MAAM,QAAQ,GAAG,CAC5B,QACG,MAAM,CAAC,CAAC,IAAM,EAAE,WAAW,IAC3B,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,GAAG,eAAe;SAC5D,GAAG,CAAC,OAAO;YACV,MAAM,MAAM,4HAAI,CAAC,IAAI,CAAC,iIAAQ,EAAE,MAAM,IAAI;YAC1C,MAAM,SAAS,OAAO;gBACpB,IAAI;oBACF,MAAM,IAAA,+IAAM,EAAC,4HAAI,CAAC,IAAI,CAAC,KAAK;oBAC5B,OAAO;gBACT,EAAE,OAAM;oBACN,OAAO;gBACT;YACF;YAEA,MAAM,aAAa,OAAO;gBACxB,IAAI;oBACF,MAAM,QAAQ,MAAM,IAAA,gJAAO,EAAC,4HAAI,CAAC,IAAI,CAAC,KAAK;oBAC3C,OAAO,MAAM,MAAM,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,SAAS,MAAM;gBACvD,EAAE,OAAM;oBACN,OAAO;gBACT;YACF;YAEA,OAAO;gBACL,IAAI,MAAM,IAAI;gBACd,SAAS,MAAM,IAAI;gBACnB,UAAU,MAAM,OAAO;gBACvB,eAAe,MAAM,OAAO;gBAC5B,UAAU,MAAM,OAAO;gBACvB,WAAW,MAAM,OAAO;gBACxB,WAAW,MAAM,OAAO;gBACxB,aAAa,MAAM,WAAW;gBAC9B,aAAa,MAAM,WAAW;YAChC;QACF;QAGJ,OAAO,uJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,GAAG;QACV,OAAO,uJAAY,CAAC,IAAI,CAAC,EAAE,EAAE;YAAE,QAAQ;QAAI;IAC7C;AACF","debugId":null}}]
}